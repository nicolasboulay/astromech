<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMULATEUR: codeuse.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>codeuse.cpp</h1><pre class="fragment"><div>00001 <span class="preprocessor">#include "module.h"</span>
00002 <span class="preprocessor">#include "systeme.h"</span>
00003 <span class="preprocessor">#include "senseur.h"</span>
00004 <span class="preprocessor">#include "codeuse.h"</span>
00005 <span class="preprocessor">#include "trace.h"</span>
00006 <span class="preprocessor">#include "tinyxml.h"</span>
00007 <span class="preprocessor">#include "effecteur.h"</span>
00008 <span class="preprocessor">#include "moteur.h"</span>
00009 <span class="preprocessor">#include &lt;math.h&gt;</span>
00010 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00011 
00012 Codeuse::Codeuse(Systeme *s,Trace * t):Senseur(s,t)
00013 {
00014   trace = t;
00015   src = <span class="stringliteral">"codeuse.cpp"</span>;
00016   cl = <span class="stringliteral">"Codeuse"</span>;
00017   message = <span class="stringliteral">"debut"</span>;
00018   trace-&gt;print(src,cl,<span class="stringliteral">"Codeuse"</span>,message);
00019     
00020   message = <span class="stringliteral">"fin"</span>;
00021   trace-&gt;print(src,cl,<span class="stringliteral">"Codeuse"</span>,message);
00022 }
00023 
00024 Codeuse::~Codeuse(<span class="keywordtype">void</span>)
00025 {
00026   message = <span class="stringliteral">"debut"</span>;
00027   trace-&gt;print(src,cl,<span class="stringliteral">"~Codeuse"</span>,message);
00028   
00029   message = <span class="stringliteral">"fin"</span>;
00030   trace-&gt;print(src,cl,<span class="stringliteral">"~Contour"</span>,message);
00031 }
00032 
00033 <span class="keywordtype">void</span> Codeuse::execute(<span class="keywordtype">int</span> tempsCourant_ms)
00034 {
00035   message = <span class="stringliteral">"debut"</span>;
00036   trace-&gt;print(src,cl,<span class="stringliteral">"execute"</span>,message);
00037   
00038   nbImpulsionComptees = (moteur-&gt;getDeltaRot_rad()/(2*M_PI))*nbPointsParTour;
00039   log &lt;&lt; tempsCourant_ms &lt;&lt;<span class="stringliteral">"\t"</span>&lt;&lt; nbImpulsionComptees &lt;&lt; endl;
00040   
00041   message = <span class="stringliteral">"fin"</span>;
00042   trace-&gt;print(src,cl,<span class="stringliteral">"execute"</span>,message);
00043 }
00044 
00045 
00046 <span class="keywordtype">void</span> Codeuse::chargerXML(TiXmlElement* pModuleXML)
00047 {
00048   message = <span class="stringliteral">"debut"</span>;
00049   trace-&gt;print(src,cl,<span class="stringliteral">"chargerXML"</span>,message);
00050   Senseur::chargerXML(pModuleXML);
00051   
00052   TiXmlElement* pElt;
00053   TiXmlHandle handleModule(0);
00054   handleModule = TiXmlHandle(pModuleXML);
00055   
00056   pElt = handleModule.FirstChild(<span class="stringliteral">"nbPointsParTour"</span>).Element();
00057   istringstream iss( pElt-&gt;GetText() );
00058   iss &gt;&gt; nbPointsParTour;
00059   message = <span class="stringliteral">"nbPointsParTour : "</span> + iss.str();
00060   trace-&gt;print(src,cl,<span class="stringliteral">"chargerXML"</span>,message);
00061     
00062   message = <span class="stringliteral">"fin"</span>;
00063   trace-&gt;print(src,cl,<span class="stringliteral">"chargerXML"</span>,message);
00064 }
00065 
00066 <span class="keywordtype">void</span> Codeuse::connectModules(<span class="keywordtype">void</span>)
00067 {
00068   message = <span class="stringliteral">"debut"</span>;
00069   trace-&gt;print(src,cl,<span class="stringliteral">"connectModules"</span>,message);
00070   
00071   string nomModule;
00072   vectorString::iterator it;
00073   it = tabRelation.begin();
00074   <span class="keywordflow">if</span> (tabRelation.size() == 1)
00075   {
00076     nomModule = *it;
00077     moteur = (Moteur *)systPere-&gt;getPtrModule(nomModule);
00078     message = <span class="stringliteral">"connection à :"</span> + nomModule;
00079     trace-&gt;print(src,cl,<span class="stringliteral">"connectModules"</span>,message);
00080   }
00081 
00082   message = <span class="stringliteral">"fin"</span>;
00083   trace-&gt;print(src,cl,<span class="stringliteral">"connectModules"</span>,message);
00084 }
00085 
00086 <span class="keywordtype">double</span> Codeuse::getNbImpulsions(<span class="keywordtype">void</span>)
00087 {
00088   <span class="keywordflow">return</span> nbImpulsionComptees;
00089 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Thu Apr 27 10:54:52 2006 for SIMULATEUR by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
